// sum a stack
:sum_stack \
  sz 1 = \
  #(+ sum_stack) \
  #(nop) \
  if

// average a stack
:avg_stack \
  sz ->$___temp \
  sum_stack <-$___temp \
  /

// do something for every element of a stack
:foreach sz 1 = #(tuck call foreach) #(pop) if

// reverse stack
:reverse \
  #(->$___temp_1) foreach \
  $___temp_1 #(->$___temp_2) foreach \
  $___temp_2 #(->$main) foreach \
  $main

// test
"test: sum_stack (21)" . cls
1 2 3 4 3 5 3 sum_stack . cls

"test: avg_stack (3)" . cls
1 2 3 4 3 5 3 avg_stack . cls

"test: reverse ([4.0, 3.0, 2.0, 1.0]<=)" . cls
1 2 3 4 reverse ...
